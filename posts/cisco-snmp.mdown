<!--
Categories:
  - networking
  - cisco
Tags:
  - snmp
  - mib
-->
## Terms ##

### Throttling ###

- Device throws away events generated over a certain rate
- Often devices throttle events system wide.
- Therefore if one event often repeated, system indiscriminately throw away events to keep the event rate below the set rate.
- This underscores the fact that events may not be received by the event management system for many reasons.


### Hysteris                                  

- Reduce the volume of events generated by thresholds on rapidly varying continuous or time sensitive data.

#### Process ####

1. Threshold set up to track the value of an object.
2. different rising and falling set points assigned to threshold.
3. Event triggered when the rising set point crossed.
4. Event not generated again until falling threshold crossed.

### Agent Based Thresholds

- Thresholds that are set on devices.
- Allow network devices to directly generate events when event occurs can set thresholds on devices with SNMP and the RMON MIB.

## Cisco MIB's

- SNMPv1 MIB should have a `ACCESS` clause.
- SNMPv2 MIB should have a `MAX=ACCESS` clause.

## Cisco IOS SNMP Support ##

- SNMPv1
    - All Cisco IOS Software releases to date include SNMPv1.
- SNMPv2
    - Releases from Cisco 10.2(13), 10.3(11), 11.0(8), 11.1(3), 11.2(1) and later have SNMPv2 removed (Note that SNMPv2 has been replaced by SNMPv2c).

- SNMPv2c
    - All Cisco IOS 11.2(6)F and later have SNMPv2C support.

- SNMPv3
    -  All Cisco IOS 12.0(3)T and greater have SNMPv3 support.

### 64 bit Counter Support ###

- Cisco 2500, 2600 and 3600 routers.
    - Do not support 64 bit counters.
    
- Cisco 4000 and higher.
    - Support 64 bit counter as of IOS 12.0(1), 12.0(1)T - CSCdj93712

- OC3 ATM Interfaces.
    - As of Cisco IOS 12.0(6)T - CSCdm45357
 
- Frame Relay interfaces.
    - Not yet implemented - CSCds09065
    - Note, Cisco IOS does not support 64 bit counters for interface speeds less than 20 Mbps.

- Catalyst 2900XL / 3500XL
    - Do not support 64 bit counters - CSCds45300

- Catalyst 5000
    - Since IOS release 3.x
    - RSM does not support 64 bit counters.

- Catalyst 6000
    - All Cisco IOS software releases.
    - MSFC and RSM support begins in 12.1(8a)E4
    - ATM modules are unsupported (CSCds07238).

- Catalyst 8500
    - All cisco IOS 12.0(5)W5(13).

## Configuration ##

- In privileged exec mode.

        router(config)#  snmp-server community [community_string] [access]

        community_string    Community string for SNMPv1, SNMP2c.
        access              Access that community string has:
                            RO         Read Only
                            RW         Read Write

        router(config)# snmp-server trap-source [interface]

        interface           Name of any active interface on the router.
                            Usually Loopback0 as always considered to be active
                            is the source address for the SNMP agent
                            Note SNMP managers use ping to determine if a router is
                            reachable on network therefore using a loopback address
                            enables manager ping to reach the router on any available
                            network interface on router.

        router(config)# snmp-server enable traps [ isdn | config | bgp | frame-relay | rtr â€¦.. ]

        Enable the trap types to send to the SNMP manager.
        Must issue this command for each trap type want to enable.

        router(config)# snmp-server host [ip_address] [community_string]

        ip_address          IP address / name of the SNMP manager.
        community_string    Community string associated with the SNMP manager.

## Cisco Device OID's ##

- And there related `show` router commands.
- Reference: RFC1213 (MIB II)

- `ifDescr`
  - `.1.3.6.1.2.1.2.2.1.2`                  
  - Textural strings of interfaces on router.
  - i.e. interface description along with the name.

- `ifName`
  - `.1.3.6.1.2.1.31.1.1.1.1`
  - Similar `ifDescr` but only gives interface name.

- `ifInNUcastPkts`
  - `.1.3.6.1.2.1.2.2.1.12`
  - Counts of inbound broadcast/ multicast packets.

- `ifInDiscards`
  - `.1.3.6.1.2.1.2.2.1.13`
  - Counted as no buffers as reflected in the show interfaces command (ignored packets).

- `ifInErrors`
  - `.1.3.6.1.2.1.2.2.1.14`
  - Count of all input errors as seen in show interfaces command.

- `ifInUnknownProtos`
  - `.1.3.6.1.2.1.2.2.1.15`
  - Unclassified errors.

- `ifOutOctets`
  - `.1.3.6.1.2.1.2.2.1.16`
  - Count of number of bytes output by the interface as seen in the show interfaces command.

- `ifOutUcastPkts`
  - `.1.3.6.1.2.1.2.2.1.17`
  - Counts of outbound broadcast/multicast packets

- `ifOutDiscards`
  - `.1.3.6.1.2.1.2.2.1.19`
  - Counted as output drops as shown in the show interfaces command (output buffer failures)

- `ifOutErrors`
  - `.1.3.6.1.2.1.2.2.1.20`
  - Counted as output errors as shown in the show interfaces command.

- `ifOutQLen`
  - `.1.3.6.1.2.1.2.2.1.21`
  - Number of packets allowed to be on the output queue as shown in the show interfaces command.